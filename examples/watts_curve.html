<html>
<head>
   <title>JSXGraph example</title>
   <link rel="stylesheet" type="text/css" href="../distrib/jsxgraph.css" />
   <script type="text/javascript" src="../distrib/prototype.js"></script>
   <script type="text/javascript" src="../src/loadjsxgraph.js"></script>
</head>
<body>
<h2>Watt's Curve</h2>
<div style="width:800px">
  <div id="jxgbox" class="jxgbox" style="width:600px; height:450px; float:left"></div>
</div>
   <script type="text/javascript">
    /* <![CDATA[ */

    board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox:[-4, 6, 10, -6], axis: true, grid: false, keepaspectratio: true});
    p1 = board.createElement('point', [0, 0], {style:2,name:"Q"});
    p2 = board.createElement('point', [6, -1], {style:2,name:"W"});
    c1 = board.createElement('circle', [p1, 2]);
    c2 = board.createElement('circle', [p2, 1.5]);
    g1 = board.createElement('glider', [6, 3, c1], {style:5,name:"Drag me"});
    c3 = board.createElement('circle', [g1, 4]);
    g2 = board.createElement('intersection', [c2,c3,0], {style:5, name: "E"});
    m1 = board.createElement('midpoint', [g1,g2], {style:8,name:"T",trace:false});

    loc = board.createElement('locus', [m1], {strokeColor: 'red'});



    function groebner(p) {
        JXG.Math.Symbolic.geometricLocusByGroebnerBase(board, p, cb);
    }

    function symbcoords(p) {
        JXG.Math.Symbolic.generateSymbolicCoordinatesPartial(board, p, 'u', 'underscore');

        $('debug').innerHTML = '';
        for(var o in board.objects) {
            if(typeof board.objects[o].symbolic.x != 'undefined') {
                $('debug').innerHTML += board.objects[o].name + ': ';
                $('debug').innerHTML += '(' + board.objects[o].symbolic.x + ', ' + board.objects[o].symbolic.y + ')<br />';
                board.objects[o].label.content.setText(board.objects[o].name + ' (' + board.objects[o].symbolic.x + ', ' + board.objects[o].symbolic.y + ')');
            }
        }
        board.update();
        JXG.Math.Symbolic.clearSymbolicCoordinates(board);
    }

    function genpoly(p) {
        JXG.Math.Symbolic.generateSymbolicCoordinatesPartial(board, p, 'u', 'underscore');

        var poly = JXG.Math.Symbolic.generatePolynomials(board, p, false);

        $('debug').innerHTML = '<ul>';
        for(var i=0; i<poly.length; i++) {

            poly[i] = poly[i].replace(/\^(\d+)/g,'<sup>$1</sup>');
            poly[i] = board.algebra.replaceSub(poly[i]);
            poly[i] = poly[i].replace(/\*/g,'');

            $('debug').innerHTML += '<li> ' + poly[i] + ' </li>';
        }
        $('debug').innerHTML += '</ul>';
        JXG.Math.Symbolic.clearSymbolicCoordinates(board);
    }

    function cb(x, y, poly) {
//        alert(poly[0].replace(/\*\*(\d+)/g,'<sup>$1</sup>').replace(/\*/g,''));
        alert(poly[0]);
    }
  /* ]]> */
  </script>
<a href="#" onclick="symbcoords(m1);">Generate symbolic coordinates</a><br />
<a href="#" onclick="genpoly(m1);">Build polynomials</a><br />
<a href="#" onclick="groebner(m1);">Generate locus of T and Y</a><br />
<div id="debug" style="display:block;"></div>
</body>
</html>
