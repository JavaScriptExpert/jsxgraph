<html>
<head>
   <title>JSXGraph example: Bundestag elections</title>
   <link rel="stylesheet" type="text/css" href="../distrib/jsxgraph.css" />
   <script type="text/javascript" src="../distrib/jquery.min.js"></script>
   <script type="text/javascript" src="../src/loadjsxgraph.js"></script>
</head>
<body>
<h2>German Bundestag elections - From 1949 to 2005</h2>

<div style="width:800px">
  <div id="jxgbox" class="jxgbox" style="width:600px; height:450px; float:left"></div>
</div>
<table id="btw" style="border: 1px solid gray;">
<tr>
<td>Wahljahr</td>
<td>1949</td>
<td>1953</td>
<td>1957</td>
<td>1961</td>
<td>1965</td>
<td>1969</td>
<td>1972</td>
<td>1976</td>
<td>1980</td>
<td>1983</td>
<td>1987</td>
<td>1990</td>
<td>1994</td>
<td>1998</td>
<td>2002</td>
<td>2005</td>

</tr>
<tr>
<td>CDU</td>
<td>25.2</td>
<td>36.4</td>
<td>39.7</td>
<td>35.8</td>
<td>39.3</td>
<td>36.6</td>
<td>35.2</td>

<td>38.0</td>
<td>34.2</td>
<td>38.2</td>
<td>34.5</td>
<td>36.7</td>
<td>34.2</td>
<td>28.4</td>
<td>29.5</td>
<td>27.8</td>

</tr>
<tr>
<td>CSU</td>
<td>5.8</td>
<td>8.8</td>
<td>10.5</td>
<td>9.6</td>
<td>9.6</td>
<td>9.5</td>
<td>9.7</td>

<td>10.6</td>
<td>10.3</td>
<td>10.6</td>
<td>9.8</td>
<td>7.1</td>
<td>7.3</td>
<td>6.7</td>
<td>9.0</td>
<td>7.4</td>

</tr>
<tr>
<td>SPD</td>
<td>29.2</td>
<td>28.8</td>
<td>31.8</td>
<td>36.2</td>
<td>39.3</td>
<td>42.7</td>
<td>45.8</td>

<td>42.6</td>
<td>42.9</td>
<td>38.2</td>
<td>37.0</td>
<td>33.5</td>
<td>36.4</td>
<td>40.9</td>
<td>38.5</td>
<td>34.2</td>

</tr>
<tr>
<td>FDP</td>
<td>11.9</td>
<td>9.5</td>
<td>7.7</td>
<td>12.8</td>
<td>9.5</td>
<td>5.8</td>
<td>8.4</td>

<td>7.9</td>
<td>10.6</td>
<td>7.0</td>
<td>9.1</td>
<td>11.0</td>
<td>6.9</td>
<td>6.2</td>
<td>7.4</td>
<td>9.8</td>

</tr>
<tr>
<td>B&uuml;ndnis 90/Die Gr&uuml;nen</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

<td>-</td>
<td>1.5</td>
<td>5.6</td>
<td>8.3</td>
<td>5</td>
<td>7.3</td>
<td>6.7</td>
<td>8.6</td>
<td>8.1</td>

</tr>
<tr>
<td>PDS/Linke.PDS</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>2.4</td>
<td>4.4</td>
<td>5.1</td>
<td>4.0</td>
<td>8.7</td>

</tr>
<tr>
<td>NPD</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>2.0</td>
<td>4.3</td>
<td>0.6</td>

<td>0.3</td>
<td>0.2</td>
<td>0.2</td>
<td>0.6</td>
<td>0.3</td>
<td>0.0</td>
<td>0.3</td>
<td>0.4</td>
<td>1.6</td>

</tr>
<tr>
<td>DP</td>
<td>4.0</td>
<td>3.3</td>
<td>3.4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

</tr>
<tr>
<td>GB/BHE</td>
<td>-</td>
<td>5.9</td>
<td>4.6</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

</tr>
<tr>
<td>REP</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>2.1</td>
<td>1.9</td>
<td>1.8</td>
<td>0.6</td>
<td>0.6</td>

</tr>
<tr>
<td>KPD</td>
<td>5.7</td>
<td>2.2</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>

</tr>
<tr>
<td>BP</td>
<td>4.2</td>
<td>1.7</td>
<td>0.9</td>
<td>-</td>
<td>-</td>
<td>0.2</td>

<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0.1</td>
<td>0.1</td>
<td>0.1</td>
<td>0.1</td>
<td>0.0</td>

<td>0.1</td>
</tr>
<tr>
<td>Sonstige</td>
<td>14.0</td>
<td>7.8</td>
<td>9.4</td>
<td>5.7</td>
<td>3.6</td>
<td>5.3</td>

<td>0.9</td>
<td>0.9</td>
<td>0.5</td>
<td>0.5</td>
<td>1.3</td>
<td>4.1</td>
<td>3.4</td>
<td>5.9</td>
<td>3.0</td>

<td>1.7</td>
</tr>
</table>

<div style="float: left">
<a href="#" onclick="all();">Create chart from whole table</a>
<br/>
<a href="#" onclick="select_parties();">Choose parties to display</a>
<br/>
<form name="form_parties">
    <input type="checkbox" value="0" name="parties">CDU<br/>
    <input type="checkbox" value="1" name="parties">CSU<br/>
    <input type="checkbox" value="2" name="parties">SPD<br/>
    <input type="checkbox" value="3" name="parties">FDP<br/>
    <input type="checkbox" value="4" name="parties">B&uuml;ndnis 90/Die Gr&uuml;nen<br/>
    <input type="checkbox" value="5" name="parties">PDS/Linke.PDS<br/>
    <input type="checkbox" value="6" name="parties">NPD<br/>
    <input type="checkbox" value="7" name="parties">DP<br/>
    <input type="checkbox" value="8" name="parties">GB/BHE<br/>
    <input type="checkbox" value="9" name="parties">REP<br/>
    <input type="checkbox" value="10" name="parties">KPD<br/>
    <input type="checkbox" value="11" name="parties">BP<br/>
    <input type="checkbox" value="12" name="parties">Sonstige<br/>
</form>
</div>

<div id="debug" style="display:block; float: right;"></div>
   <script type="text/javascript">
   /* <![CDATA[ */
        var b = JXG._board('jxgbox', {boundingbox: [-1, 50, 17, -5], axis: true, grid: false}), charts, i,
            colors = ['black', '#333333', 'red', 'yellow', 'green', '#8B00FF', '#965220', '#96abee', 'gray', '#965220', 'red', 'blue', 'orange'],
            hStroke = [];

        function all() {
            b.removeObject(charts);

	    	charts = b.create('chart', ['btw'], {chartStyle: 'point,line', withHeaders: true, strokeColor: colors, fillColor: colors, highlightFillColor: colors, highlightStrokeColor: colors});
        }

        function select_parties() {
            var i, chartType = 'line', color = [];

            b.removeObject(charts);

            var part = [];
            $('input[name=parties]').each(function () { if(this.checked) { part.push(parseInt($(this).val())); color.push(colors[parseInt($(this).val())]); } });

            if(part.length <4)
                chartType = 'bar';

	    	charts = b.create('chart', ['btw'], {chartStyle: 'point,' + chartType, withHeaders: true, strokeColor: color, fillColor: color, highlightFillColor: color, highlightStrokeColor: color, rows: part});
        }

        b.highlightInfobox = function(x,y,el) {
            var years = [1949, 1953, 1957, 1961, 1965, 1969, 1972, 1976, 1980, 1983, 1987, 1990, 1994, 1998, 2002, 2005];
            this.infobox.setText('<span style="color:black;font-weight:bold">' + years[Math.round(x)-1] + ': ' + y + ' %</span>');
            this.infobox.rendNode.style.border = 'groove ' + el.visProp['strokeColor'] + ' 2px';
            this.infobox.rendNode.style.padding = '5px';
            this.infobox.rendNode.style.backgroundColor = 'white';
        }  

    var elements = [];
    for(var o in JXG.JSXGraph.elements) {
        elements.push(o);
    }

    elements.sort();
    $('#debug').html(elements.join('<br/>'));

  /* ]]> */
  </script>
</body>
</html>
