<html>
	<head>
		<link rel="stylesheet" type="text/css" href="http://jsxgraph.uni-bayreuth.de/distrib/jsxgraph.css" />
		<script type="text/javascript" src="http://jsxgraph.uni-bayreuth.de/distrib/prototype.js"></script>
	 	<script type="text/javascript" src="../src/loadjsxgraph.js"></script>
        <!--<script type="text/javascript" src="http://jsxgraph.uni-bayreuth.de/distrib/jsxgraphcore.js"></script>-->
	</head>
 	<body>
 		<div id="jsxgbox" class="jxgbox" style="width:800px; height:800px;"></div>
		<script type="text/javascript">
// From http://www.efg2.com/Lab/Graphics/Colors/HSV.htm        
var HSV2RGB = function(H,S,V) {
    var R,G,B, f,i,hTemp, p,q,t;
    if (s==0) {
        if (isNaN(H)) {
            R = V;
            G = V;
            B = V;
        } else {
            return '#000000';
        }
    } else {
        if (H>=360) {
            hTemp = 0.0;
        } else {
            hTemp = H;
        }
        hTemp = hTemp / 60;     // h is now IN [0,6)
        i = Math.floor(hTemp);        // largest integer <= h
        f = hTemp - i;                  // fractional part of h
        p = V * (1.0 - S);
        q = V * (1.0 - (S * f));
        t = V * (1.0 - (S * (1.0 - f)));
        switch (i) {
            case 0: R = V; G = t;  B = p; break;
            case 1: R = q; G = V;  B = p; break;
            case 2: R = p; G = V;  B = t; break;
            case 3: R = p; G = q;  B = V; break;
            case 4: R = t; G = p;  B = V; break;
            case 5: R = V; G = p;  B = q; break;
        }
    }
    R = Math.round(R*255).toString(16); R = (R.length==0)?'00':((R.length==1)?'0'+R:R);
    G = Math.round(G*255).toString(16); G = (G.length==0)?'00':((G.length==1)?'0'+G:G);
    B = Math.round(B*255).toString(16); B = (B.length==0)?'00':((B.length==1)?'0'+B:B);
    return '#'+R+G+B; 
}




var board = JXG.JSXGraph.initBoard('jsxgbox', {originX: 300, originY: 300, unitX: 50, unitY: 50});
 			//var S = board.createElement('slider', [-5,-6,10,0,1,0.5], {name:'S'});
 			var S = board.createElement('slider', [[-5,-6],[5,-6],[0,0.5,1]], {name:'S'});
 			//
 			var points = new Array();
			points[0] = board.createElement('point',[5, 5], {name:' '});	
	 		points[1] = board.createElement('point',[-5, 5], {name:' '});	
	 		points[2] = board.createElement('point',[-5, -5], {name:' '});	
	 		points[3] = board.createElement('point',[5, -5], {name:' '});	
                
            function viereck(pt, n) {
                var arr = new Array();
                for(var i = 0; i < 4; i++) {
                    // Ab Version 0.60:
                    
                    arr[i] = board.createElement('point', 
                        [function(t) {
                            return function () {var x = pt[t].X(); 
                                                var x1 = pt[(t+1)%4].X(); 
                                                var s = S.X();
                                                return x+(x1-x)*s;
                         }}(i), 
                         function(t) {
                            return function () {var y = pt[t].Y(); 
                                                var y1 = pt[(t+1)%4].Y(); 
                                                var s = S.X();
                                                return y+(y1-y)*s;
                         }}(i)
                        ], 
                        {style:3, name:" "});
                    
                    // Ab Version 0.50 Workaround
                    /*
                    arr[i] = board.createElement('point', 
                        [function(t) {
                            return function () {var x = pt[t].coords.usrCoords[1]; 
                                                var x1 = pt[(t+1)%4].coords.usrCoords[1]; 
                                                var s = S.X();
                                                return x+(x1-x)*s;
                         }}(i), 
                         function(t) {
                            return function () {var y = pt[t].coords.usrCoords[2]; 
                                                var y1 = pt[(t+1)%4].coords.usrCoords[2]; 
                                                var s = S.X();
                                                return y+(y1-y)*s;
                         }}(i)
                        ], 
                        {style:3, name:" "});
                    */
                    //board.createElement('line',[pt[i], pt[(i+1)%4]], {straightFirst:false, straightLast:false, strokeWidth:1});
                }
                board.createElement('polygon',pt, {fillColor:HSV2RGB(100,0.6,(n/30.0)*(n/30.0)),fillOpacity:0.4});
                if(n>0)
                    viereck(arr, --n);
            }
	 		
            board.suspendUpdate();
	 		viereck(points,30);
            board.unsuspendUpdate();
 			//*/
		</script>
 	</body>
</html>
	 		