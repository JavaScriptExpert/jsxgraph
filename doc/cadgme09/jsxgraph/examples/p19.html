<html>
    <head>
        <title></title>
        <link rel="stylesheet" type="text/css" href="../distrib/jsxgraph.present.css" />
        <script type="text/javascript" src="../distrib/jquery.min.js"></script>
        <script type="text/javascript" src="../distrib/jsxgraphcore.js"></script>
    </head>
    <body class="jsxgraph_body"><br /><br />
  <div id="jxgbox" class="jxgbox" style="width:600px; height:450px; float:left"></div>
   <script type="text/javascript">
    /* <![CDATA[ */

    board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox:[-2, 10, 14, -2], axis: true, grid: false});
    p1 = board.createElement('point', [4, 4], {style:2,name:"Q"});
    p2 = board.createElement('point', [10, 2], {style:2,name:"W"});
    c1 = board.createElement('circle', [p1, 3]);
    c2 = board.createElement('circle', [p2, 2]);
    g1 = board.createElement('glider', [6, 3, c1], {style:5,name:"Drag me"});
    c3 = board.createElement('circle', [g1, 4]);
    g2 = board.createElement('intersection', [c2,c3,0], {style:5, name: "E"});
    g3 = board.createElement('intersection', [c2,c3,1], {style:5, name: "R"});
    m1 = board.createElement('midpoint', [g1,g2], {style:8,name:"T"});

    function groebner(p) {
        JXG.Math.Symbolic.geometricLocusByGroebnerBase(board, p, cb);
    }

    function cb(poly) {
        var text = "<p>The locus is (or is contained in) the ideal generated by</p><ul>";
        for(var i=0; i<poly.length; i++) {
            if(poly[i] != '')
                text += '<li>' + poly[i].replace(/\*\*(\d+)/g,'<sup>$1</sup>').replace(/\*/g,'') + '</li>';
        }
        text += "</ul>";
        top.document.getElementById('debug').innerHTML = text;
    }

    function symbcoords(p) {
        JXG.Math.Symbolic.generateSymbolicCoordinatesPartial(board, p, 'u', 'underscore');

        for(var o in board.objects) {
            if(typeof board.objects[o].symbolic.x != 'undefined') {
                board.objects[o].label.content.setText(board.objects[o].name + ' (' + board.objects[o].symbolic.x + ', ' + board.objects[o].symbolic.y + ')');
            }
        }
        board.update();
        JXG.Math.Symbolic.clearSymbolicCoordinates(board);
    }

    function genpoly(p) {
        JXG.Math.Symbolic.generateSymbolicCoordinatesPartial(board, p, 'u', 'underscore');

        var poly = JXG.Math.Symbolic.generatePolynomials(board, p, false);

        top.document.getElementById('debug').innerHTML = '<ul>';
        for(var i=0; i<poly.length; i++) {

            poly[i] = poly[i].replace(/\^(\d+)/g,'<sup>$1</sup>');
            poly[i] = board.algebra.replaceSub(poly[i]);
            poly[i] = poly[i].replace(/\*/g,'');

            top.document.getElementById('debug').innerHTML += '<li> ' + poly[i] + ' </li>';
        }
        top.document.getElementById('debug').innerHTML += '</ul>';
        JXG.Math.Symbolic.clearSymbolicCoordinates(board);
    }
  /* ]]> */
  </script>
<a href="#" onclick="symbcoords(m1);">Generate symbolic coordinates</a>,
<a href="#" onclick="genpoly(m1);">build polynomials</a>,
<a href="#" onclick="groebner(m1);">calculate locus of T</a><br />
    </body>
</html>
